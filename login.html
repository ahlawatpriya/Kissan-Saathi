<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kisaan saathi Authentication</title>
    <style>
        body { 
            font-family: Arial, sans-serif; margin: 0;
            background-image: url('https://i.pinimg.com/736x/34/33/5c/34335ca3d2e867ea698a59ba2fd46eb2.jpg');
            background-size: cover; background-repeat: no-repeat; 
            display: flex; align-items:center; justify-content: center;
            min-height: 100vh;
        }
        .container { 
            background-color:rgba(0,0,0,0.4); padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.5); width: 450px; margin: 20px auto; 
            margin-top: 80px; /* Add top margin to push below navbar */
        }
        h2 { color:white; text-align: center; margin-bottom: 20px; }
        .form-group { margin: 15px 0; }
        label { color:white; display: block; margin-bottom: 5px;font-weight: bolder; }
        input { width: 100%; padding: 8px; margin-bottom: 10px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; }
        button { width: 100%; padding: 10px; background: #333; color: white; border: 2px solid #333; cursor: pointer; border-radius: 4px; transition: border-color 0.3s; }
        button:hover, button:focus { border-color: white; outline: none; }
        #captcha-container, .otp-buttons { display: flex; gap: 10px; }
        #captcha-input, #otp { width: 100%; }
        #location-container { display: flex; gap: 10px;   position: relative; }
        #cityDropdown { width: 25%; height: 80%; padding: 4px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;
            font-size: 14px;position: absolute;   right: 0;   top: 0;   z-index: 2;   background: white;
        } #location { width: 70%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        .otp-buttons button, #captcha-container button { width: 48%; }
        .popup {  display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); /* Remove background-color: white; */ background: transparent;
            padding: 0; border: none; box-shadow: none; z-index: 1000; }
        .popup-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 999;
            backdrop-filter: blur(2px);-webkit-backdrop-filter: blur(3px); }
        .popup-content {   display: flex; flex-direction: column; gap: 10px; }
        .popup-content input { padding: 8px; margin: 5px 0; }
        .popup-content button { padding: 8px; margin: 5px 0; cursor: pointer; }
        /* Navbar styles */
.navbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background-color: rgba(0, 0, 0, 0.3);
    padding: 5px 10px;
    width: 100%;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 100;
    height: 60px;
}

.navbar-left {
    display: flex;
    align-items: center;
}

.navbar-logo {
    height: 44px;
    margin-right: 10px;
    margin-left: 10px;
}

.navbar-title {
    color:rgb(42, 250, 42);
    font-size: 20px;
    font-weight: bold;
    letter-spacing: 1px;
}

.navbar-right {
    display: flex;
    align-items: center;
    gap: 18px;
    margin-right: 10px;
}

.navbar-link {
    color: #fff;
    background: none;
    border: none;
    font-size: 16px;
    cursor: pointer;
    font-weight: 500;
    padding: 6px 12px;
    border-radius: 4px;
    transition: background 0.2s, color 0.2s;
}

.navbar-link:hover {
    background: #222;
    color: #2afa2a;
}
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script>
        emailjs.init('VNuJ8IKLB3a6B_u-C'); // Safe for frontend
    </script>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-left">
            <img src="logo kisaan sathi.png" alt="Logo" class="navbar-logo">
            <span class="navbar-title">KISSAN SAATHI</span>
        </div>
        <div class="navbar-right" id="navbarRight">
            <!-- Links will be injected by JS -->
        </div>
    </nav>

    <div class="container" id="authContainer">
        <h2>Welcome Back!</h2>
        <form id="loginForm">
            <div class="form-group">
                <label for="loginUsername">Username</label>
                <input type="text" id="loginUsername" name="Username" required>
            </div>
            <div class="form-group">
                <label for="loginPassword">Password</label>
                <div style="position:relative;">
                    <input type="password" id="loginPassword" required style="padding-right:30px;" name="Password">
                    <span class="toggle-password" data-target="loginPassword" style="position:absolute;right:5px;bottom:8px;cursor:pointer;font-size:18px;user-select:none;">üëÅÔ∏è</span>
                </div>
            </div>
            <button type="submit">Login</button>
            <button style="margin-top: 5%;" type="button" onclick="showForgotPasswordPopup()">Forgot Password</button>
            <p style="text-align: center; color: white;">Don't have an account? <a style="color: aqua;" href="#" onclick="showSignup()">Register</a></p>
        </form>
    </div>

    <!-- Forgot Password Popup -->
    <div class="popup-overlay" id="popupOverlay"></div>
    <div class="popup" id="forgotPasswordPopup">
        <div class="container" style="background:rgba(0,0,0,0.4); box-shadow: 0 0 10px rgba(0,0,0,0.5); border-radius:10px; padding: 24px 28px; width: 100%; max-width: 370px; min-width: 320px; margin: 0 auto;">
            <h2 style="color:white; text-align:center; margin-bottom:20px;">Reset Password</h2>
            <form id="forgotPasswordForm" onsubmit="submitNewPassword(); return false;">
                <div class="form-group">
                    <label for="newPassword" style="color:white;">New Password</label>
                    <div style="position:relative;">
                        <input type="password" id="newPassword" name="newPassword" required placeholder="Enter new password" style="padding-right:30px;" onfocus="showForgotPasswordHint()" oninput="updateForgotPasswordHint(this)">
                        <span class="toggle-password" data-target="newPassword" style="position:absolute;right:5px;bottom:8px;cursor:pointer;font-size:18px;user-select:none;">üëÅÔ∏è</span>
                    </div>
                    <div class="password-hint" id="forgotPasswordHint" style="margin-top:4px;"></div>
                </div>
                <div class="form-group">
                    <label for="confirmPassword" style="color:white;">Confirm Password</label>
                    <div style="position:relative;">
                        <input type="password" id="forgotConfirmPassword" name="confirmPassword" required placeholder="Confirm new password" style="padding-right:30px;">
                        <span class="toggle-password" data-target="forgotConfirmPassword" style="position:absolute;right:5px;bottom:8px;cursor:pointer;font-size:18px;user-select:none;">üëÅÔ∏è</span>
                    </div>
                </div>
                <button type="submit" style="margin-top:10px;">Submit</button>
                <button type="button" onclick="closeForgotPasswordPopup()" style="background:#222; color:white; margin-top:10px;">Cancel</button>
            </form>
        </div>
    </div>

    <div class="container" id="signupContainer" style="display: none;">
        <h2>Create your account</h2>
        <form id="signupForm">
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="Email" required placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label for="otp">OTP</label>
                <input type="text" id="otp" required placeholder="Enter OTP">
                <div class="otp-buttons">
                    <button type="button" onclick="sendOTP()">Send OTP</button>
                    <button type="button" onclick="verifyOTP()">Verify</button>
                </div>
            </div>
            <div class="form-group">
                <label for="username">Username</label>
                <input type="text" id="username" name="Username" required placeholder="Choose a username">
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <div style="position:relative;">
                    <input type="password" id="password" name="Password" required placeholder="Create a password" onfocus="showPasswordHint()" oninput="updatePasswordHint(this)" style="padding-right:30px;">
                    <span class="toggle-password" data-target="password" style="position:absolute;right:5px;bottom:8px;cursor:pointer;font-size:18px;user-select:none;">üëÅÔ∏è</span>
                </div>
                <div class="password-hint" id="registerPasswordHint"></div>
            </div>
            <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <div style="position:relative;">
                    <input type="password" id="confirmPassword" required placeholder="Confirm password" style="padding-right:30px;">
                    <span class="toggle-password" data-target="confirmPassword" style="position:absolute;right:5px;bottom:8px;cursor:pointer;font-size:18px;user-select:none;">üëÅÔ∏è</span>
                </div>
            </div>
            <div class="form-group">
                <label for="captcha">CAPTCHA</label>
                <input type="text" id="captchaInput" required placeholder="Enter CAPTCHA">
                <div id="captcha-container">
                    <input type="text" id="captcha-input" readonly placeholder="Generated CAPTCHA">
                    <button type="button" onclick="generateCaptcha()">Refresh</button>
                </div>
            </div>
            <div class="form-group">
                <label for="location">Location</label>
                <div id="location-container">
                    <input type="text" name="Location" id="location" required placeholder="Enter your location">
                    <select id="cityDropdown" onchange="updateLocation()">
                        <option value="" selected disabled>Select</option>
                        <option value="Agra, Uttar Pradesh">Agra, Uttar Pradesh</option>
                        <option value="Ahmedabad, Gujarat">Ahmedabad, Gujarat</option>
                        <option value="Ajmer, Rajasthan">Ajmer, Rajasthan</option>
                        <option value="Allahabad, Uttar Pradesh">Allahabad, Uttar Pradesh</option>
                        <option value="Amritsar, Punjab">Amritsar, Punjab</option>
                        <option value="Aurangabad, Maharashtra">Aurangabad, Maharashtra</option>
                        <option value="Bangalore, Karnataka">Bangalore, Karnataka</option>
                        <option value="Bareilly, Uttar Pradesh">Bareilly, Uttar Pradesh</option>
                        <option value="Bhopal, Madhya Pradesh">Bhopal, Madhya Pradesh</option>
                        <option value="Bhubaneswar, Odisha">Bhubaneswar, Odisha</option>
                        <option value="Chandigarh, Chandigarh">Chandigarh, Chandigarh</option>
                        <option value="Chennai, Tamil Nadu">Chennai, Tamil Nadu</option>
                        <option value="Coimbatore, Tamil Nadu">Coimbatore, Tamil Nadu</option>
                        <option value="Cuttack, Odisha">Cuttack, Odisha</option>
                        <option value="Dehradun, Uttarakhand">Dehradun, Uttarakhand</option>
                        <option value="Delhi, Delhi">Delhi, Delhi</option>
                        <option value="Faridabad, Haryana">Faridabad, Haryana</option>
                        <option value="Ghaziabad, Uttar Pradesh">Ghaziabad, Uttar Pradesh</option>  
                        <option value="Gurgaon, Haryana">Gurgaon, Haryana</option>
                        <option value="Guwahati, Assam">Guwahati, Assam</option>
                        <option value="Gwalior, Madhya Pradesh">Gwalior, Madhya Pradesh</option>
                        <option value="Hubli, Karnataka">Hubli, Karnataka</option>
                        <option value="Hyderabad, Telangana">Hyderabad, Telangana</option>
                        <option value="Indore, Madhya Pradesh">Indore, Madhya Pradesh</option>
                        <option value="Jabalpur, Madhya Pradesh">Jabalpur, Madhya Pradesh</option>
                        <option value="Jaipur, Rajasthan">Jaipur, Rajasthan</option>
                        <option value="Jalandhar, Punjab">Jalandhar, Punjab</option>
                        <option value="Jammu, Jammu and Kashmir">Jammu, Jammu and Kashmir</option>
                        <option value="Jamshedpur, Jharkhand">Jamshedpur, Jharkhand</option>
                        <option value="Jodhpur, Rajasthan">Jodhpur, Rajasthan</option>
                        <option value="Kanpur, Uttar Pradesh">Kanpur, Uttar Pradesh</option>
                        <option value="Kochi, Kerala">Kochi, Kerala</option>
                        <option value="Kolkata, West Bengal">Kolkata, West Bengal</option>
                        <option value="Kota, Rajasthan">Kota, Rajasthan</option>
                        <option value="Kozhikode, Kerala">Kozhikode, Kerala</option>
                        <option value="Lucknow, Uttar Pradesh">Lucknow, Uttar Pradesh</option>
                        <option value="Ludhiana, Punjab">Ludhiana, Punjab</option>
                        <option value="Madurai, Tamil Nadu">Madurai, Tamil Nadu</option>
                        <option value="Mangalore, Karnataka">Mangalore, Karnataka</option>
                        <option value="Meerut, Uttar Pradesh">Meerut, Uttar Pradesh</option>
                        <option value="Mumbai, Maharashtra">Mumbai, Maharashtra</option>
                        <option value="Mysore, Karnataka">Mysore, Karnataka</option>
                        <option value="Nagpur, Maharashtra">Nagpur, Maharashtra</option>
                        <option value="Nashik, Maharashtra">Nashik, Maharashtra</option>
                        <option value="New Delhi, Delhi">New Delhi, Delhi</option>
                        <option value="Noida, Uttar Pradesh">Noida, Uttar Pradesh</option>
                        <option value="Panipat, Haryana">Panipat, Haryana</option>
                        <option value="Patna, Bihar">Patna, Bihar</option>
                        <option value="Pune, Maharashtra">Pune, Maharashtra</option>
                        <option value="Raipur, Chhattisgarh">Raipur, Chhattisgarh</option>
                        <option value="Rajkot, Gujarat">Rajkot, Gujarat</option>
                        <option value="Ranchi, Jharkhand">Ranchi, Jharkhand</option>
                        <option value="Salem, Tamil Nadu">Salem, Tamil Nadu</option>
                        <option value="Shimla, Himachal Pradesh">Shimla, Himachal Pradesh</option>
                        <option value="Siliguri, West Bengal">Siliguri, West Bengal</option>
                        <option value="Srinagar, Jammu and Kashmir">Srinagar, Jammu and Kashmir</option>
                        <option value="Surat, Gujarat">Surat, Gujarat</option>
                        <option value="Thiruvananthapuram, Kerala">Thiruvananthapuram, Kerala</option>
                        <option value="Thrissur, Kerala">Thrissur, Kerala</option>
                        <option value="Tirupati, Andhra Pradesh">Tirupati, Andhra Pradesh</option>
                        <option value="Udaipur, Rajasthan">Udaipur, Rajasthan</option>
                        <option value="Vadodara, Gujarat">Vadodara, Gujarat</option>
                        <option value="Varanasi, Uttar Pradesh">Varanasi, Uttar Pradesh</option>
                        <option value="Vijayawada, Andhra Pradesh">Vijayawada, Andhra Pradesh</option>
                        <option value="Visakhapatnam, Andhra Pradesh">Visakhapatnam, Andhra Pradesh</option>
                       
                    </select>
                </div>
                <button type="button" onclick="getLocation()">Current Location</button>
            </div>
            <button type="submit">Register</button>
            <p style="text-align: center; color: white;">Already have an account? <a style="color: aqua;" href="#" onclick="showLogin()">Login</a></p>
        </form>
    </div>

    <script>
        let captchaValue = '';
        let otpValue = Math.floor(1000 + Math.random() * 9000).toString();

        function generateCaptcha() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            captchaValue = '';
            for (let i = 0; i < 6; i++) {
                captchaValue += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            document.getElementById('captcha-input').value = captchaValue;
        }
        function showPasswordHint() {
            const hint = document.getElementById('registerPasswordHint');
            hint.innerHTML = 'Password must contain:<ul style="margin:0 0 0 15px;padding:0;"><li>Uppercase letters</li><li>Lowercase letters</li><li>Numbers</li><li>Special characters</li></ul>';
            hint.style.color = 'red';
        }
        function updatePasswordHint(input) {
            const hint = document.getElementById('registerPasswordHint');
            const value = input.value;
            if (value.length < 8) {
                hint.innerHTML = 'Password must be at least 8 characters long.';
                hint.style.color = 'red';
            } else if (!/[A-Z]/.test(value) || !/[a-z]/.test(value) || !/[0-9]/.test(value) || !/[\W_]/.test(value)) {
                hint.innerHTML = 'Password must contain:<ul style="margin:0 0 0 15px;padding:0;"><li>Uppercase letters</li><li>Lowercase letters</li><li>Numbers</li><li>Special characters</li></ul>';
                hint.style.color = 'red';
            } else {
                hint.innerHTML = '';
            }
        }

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async (position) => {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    const response = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
                    const data = await response.json();
                    const city = data.address.city || data.address.town || data.address.village || 'Unknown City';
                    const state = data.address.state || 'Unknown State';
                    document.getElementById('location').value = `${city}, ${state}`;
                }, () => {
                    document.getElementById('location').value = 'Location access denied';
                });
            } else {
                document.getElementById('location').value = 'Geolocation not supported';
            }
        }

        function updateLocation() {
            const selectedCity = document.getElementById('cityDropdown').value;
            if (selectedCity) {
                document.getElementById('location').value = selectedCity;
            }
            // Reset dropdown to default after selection
            document.getElementById('cityDropdown').selectedIndex = 0;
        }

        function sendOTP() {
    const email = document.getElementById('email').value;
    
    if (!email) {
        alert('Please enter your email first!');
        return;
    }

    // Send OTP via EmailJS
    emailjs.send('service_3mfmcye', 'template_x516asv', {
        email: email,
        otpValue: otpValue
    })
    .then(() => alert('OTP sent! Check your email.'))
    .catch((error) => alert('Failed to send OTP: ' + error));
}

        function verifyOTP() {
            const userOTP = document.getElementById('otp').value;
            if (userOTP === otpValue) {
                alert('OTP verified successfully!');
            } else {
                alert('Invalid OTP!');
            }
        }

        function showLogin() {
            document.getElementById('authContainer').style.display = 'block';
            document.getElementById('signupContainer').style.display = 'none';
        }

        function showSignup() {
            document.getElementById('authContainer').style.display = 'none';
            document.getElementById('signupContainer').style.display = 'block';
            generateCaptcha();
        }

        // Check if user exists in localStorage and show appropriate form
window.addEventListener('DOMContentLoaded', function() {
    const user = localStorage.getItem('user');
    if (!user) {
        document.getElementById('authContainer').style.display = 'none';
        document.getElementById('signupContainer').style.display = 'block';
    } else {
        document.getElementById('authContainer').style.display = 'block';
        document.getElementById('signupContainer').style.display = 'none';
    }
    // Generate CAPTCHA on page load
    generateCaptcha();
});

        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            const user = JSON.parse(localStorage.getItem('user'));
            if (!user) {
                alert('No account found. Please register first.');
                showSignup();
                return;
            }
            // Use correct property names: Username and Password (case-sensitive)
            if (user.Username === username && user.Password === password) {
                submitLoginToSheet(username, password);
                window.location.href = 'main.html';
            } else {
                alert('Invalid username or password!');
            }
        });

        document.getElementById('signupForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const captchaInput = document.getElementById('captchaInput').value;
            const location = document.getElementById('location').value;

            if (password !== confirmPassword) {
                alert('Passwords do not match!');
                return;
            }
            if (captchaInput !== captchaValue) {
                alert('Invalid CAPTCHA!');
                generateCaptcha();
                return;
            }
            // Save user details in localStorage with correct property names
            const user = { Email: email, Username: username, Password: password, Location: location };
            localStorage.setItem('user', JSON.stringify(user));
            // Submit user details to Google Sheet (UserAccount details)
            submitSignupToSheet(username, password, location, email);
            alert(`Account created for Username: ${username} with Email: ${email}`);
            showLogin();
        });

        // Forgot Password: Update password in localStorage
        document.getElementById('forgotPasswordForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const password = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('forgotConfirmPassword').value;
            const hint = document.getElementById('forgotPasswordHint');
            if (password.length < 8 || !/[A-Z]/.test(password) || !/[a-z]/.test(password) || !/[0-9]/.test(password) || !/[\W_]/.test(password)) {
                hint.innerHTML = 'Password must contain:<ul style="margin:0 0 0 15px;padding:0;"><li>Uppercase letters</li><li>Lowercase letters</li><li>Numbers</li><li>Special characters</li></ul>';
                hint.style.color = 'orange';
                return;
            }
            if (password !== confirmPassword) {
                hint.innerHTML = 'Passwords do not match!';
                hint.style.color = 'red';
                return;
            }
            // Update password in localStorage with correct property name
            let user = JSON.parse(localStorage.getItem('user'));
            if (user) {
                user.Password = password;
                localStorage.setItem('user', JSON.stringify(user));
            }
            hint.innerHTML = '';
            alert('Password reset successful!');
            closeForgotPasswordPopup();
        });

        // Initial setup
        showLogin();

        

       

       
    </script>
    <!-- Add JS for toggling password visibility -->
    <script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.toggle-password').forEach(function(eye) {
        eye.addEventListener('click', function() {
            const targetId = eye.getAttribute('data-target');
            const input = document.getElementById(targetId);
            if (input) {
                if (input.type === 'password') {
                    input.type = 'text';
                } else {
                    input.type = 'password';
                }
            }
        });
    });
});
</script>
<script>
        function showForgotPasswordHint() {
            const hint = document.getElementById('forgotPasswordHint');
            hint.innerHTML = 'Password must contain:<ul style="margin:0 0 0 15px;padding:0;"><li>Uppercase letters</li><li>Lowercase letters</li><li>Numbers</li><li>Special characters</li></ul>';
            hint.style.color = 'orange';
        }
        function updateForgotPasswordHint(input) {
            const hint = document.getElementById('forgotPasswordHint');
            const value = input.value;
            if (value.length < 8) {
                hint.innerHTML = 'Password must be at least 8 characters long.';
                hint.style.color = 'red';
            } else if (!/[A-Z]/.test(value) || !/[a-z]/.test(value) || !/[0-9]/.test(value) || !/[\W_]/.test(value)) {
                hint.innerHTML = 'Password must contain:<ul style="margin:0 0 0 15px;padding:0;"><li>Uppercase letters</li><li>Lowercase letters</li><li>Numbers</li><li>Special characters</li></ul>';
                hint.style.color = 'orange';
            } else {
                hint.innerHTML = '';
            }
        }

        document.getElementById('forgotPasswordForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const password = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('forgotConfirmPassword').value;
            const hint = document.getElementById('forgotPasswordHint');
            if (password.length < 8 || !/[A-Z]/.test(password) || !/[a-z]/.test(password) || !/[0-9]/.test(password) || !/[\W_]/.test(password)) {
                hint.innerHTML = 'Password must contain:<ul style="margin:0 0 0 15px;padding:0;"><li>Uppercase letters</li><li>Lowercase letters</li><li>Numbers</li><li>Special characters</li></ul>';
                hint.style.color = 'orange';
                return;
            }
            if (password !== confirmPassword) {
                hint.innerHTML = 'Passwords do not match!';
                hint.style.color = 'red';
                return;
            }
            hint.innerHTML = '';
            alert('Password reset successful!');
            closeForgotPasswordPopup();
        });

        function showForgotPasswordPopup() {
    document.getElementById('popupOverlay').style.display = 'block';
    document.getElementById('forgotPasswordPopup').style.display = 'block';
    document.getElementById('authContainer').style.display = 'none';
}
function closeForgotPasswordPopup() {
    document.getElementById('popupOverlay').style.display = 'none';
    document.getElementById('forgotPasswordPopup').style.display = 'none';
    document.getElementById('authContainer').style.display = 'block';
}
function submitLoginToSheet(Username, Password) {
    const formData = new FormData();
    formData.append('Username', Username);
    formData.append('Password', Password);
    formData.append('Timestamp', new Date().toISOString());
    formData.append('sheet', 'login details');

    fetch('https://script.google.com/macros/s/AKfycbwxiX2mLT4vgbbPFUpOLyz03ep7RuDXl3OB3YmwqKr06GeVIyLbnQzxvylE7o9FVoM/exec', {
        method: 'POST',
        body: new URLSearchParams(formData)
    })
    .then(response => {
        // Optionally handle response
        // if (!response.ok) throw new Error('Network response was not ok');
        // return response.json();
    })
    .catch(error => {
        // Optionally handle error
        // console.error('Error saving login record:', error);
    });
}
function submitSignupToSheet(Username, Password, Location, Email) {
    const formData = new FormData();
    formData.append('Username', Username);
    formData.append('Password', Password);
    formData.append('Location', Location);
    formData.append('Email', Email);
    formData.append('Timestamp', new Date().toISOString());
    formData.append('sheet', 'UserAccount details');

    fetch('https://script.google.com/macros/s/AKfycbwxiX2mLT4vgbbPFUpOLyz03ep7RuDXl3OB3YmwqKr06GeVIyLbnQzxvylE7o9FVoM/exec', {
        method: 'POST',
        body: new URLSearchParams(formData)
    })
    .then(response => {
        // Optionally handle response
        // if (!response.ok) throw new Error('Network response was not ok');
        // return response.json();
    })
    .catch(error => {
        // Optionally handle error
        // console.error('Error saving signup record:', error);
    });
}
    </script>
    <script>
function updateNavbarLinks() {
    const navbarRight = document.getElementById('navbarRight');
    navbarRight.innerHTML = '';
    if (document.getElementById('authContainer').style.display !== 'none') {
        // Login form is visible
        navbarRight.innerHTML = `
            <button class="navbar-link" onclick="goHome()">Home</button>
            <button class="navbar-link" onclick="showSignup()">Signup</button>
        `;
    } else if (document.getElementById('signupContainer').style.display !== 'none') {
        // Signup form is visible
        navbarRight.innerHTML = `
            <button class="navbar-link" onclick="goHome()">Home</button>
            <button class="navbar-link" onclick="showLogin()">Login</button>
        `;
    }
}
function goHome() {
    // Just reload the page to reset to login/signup state
    window.location.reload();
}
// Patch showLogin and showSignup to update navbar
const _showLogin = showLogin;
const _showSignup = showSignup;
window.showLogin = function() {
    _showLogin();
    updateNavbarLinks();
};
window.showSignup = function() {
    _showSignup();
    updateNavbarLinks();
};
// On DOMContentLoaded, update navbar links
window.addEventListener('DOMContentLoaded', function() {
    updateNavbarLinks();
});
    </script>
</body>
</html>